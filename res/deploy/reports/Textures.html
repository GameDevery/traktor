<html>
	<head>
		<title>Textures</title>
		<style type="text/css">
			body {
				background-color: #ffffff;
				font-family: Tahoma;
				font-size: 80%;
			}
			table {
				background-color: #f0f0e0;
				border-style: none;
				border-collapse:collapse;
				font-size: 90%;
				width: 100%;
				text-align: left;
			}
			tr, td {
				border: 1px solid #a0a090;
			}
			tr.alt {
				border: 1px solid #a0a090;
				background-color: #e0e0d0;
			}
			tr.total {
				border-style: none;
				background-color: #f5f5e5;
				font-weight: bold;
			}
			th, td {
				padding: 2px;
			}
			th {
				background-color: #f5f5e5;
			}
		</style>
	</head>
	<body>
<?--
		local formats = {
			[1] = "TfR8",
			[2] = "TfR8G8B8A8",
			[3] = "TfR5G6B5",
			[4] = "TfR5G5B5A1",
			[5] = "TfR4G4B4A4",
			[10] = "TfR16G16B16A16F",
			[11] = "TfR32G32B32A32F",
			[12] = "TfR16G16F",
			[13] = "TfR32G32F",
			[14] = "TfR16F",
			[15] = "TfR32F",
			[16] = "TfR11G11B10F",
			[30] = "TfDXT1",
			[31] = "TfDXT2",
			[32] = "TfDXT3",
			[33] = "TfDXT4",
			[34] = "TfDXT5",
			[40] = "TfPVRTC1",
			[41] = "TfPVRTC2",
			[42] = "TfPVRTC3",
			[43] = "TfPVRTC4"
		}

		local db = Connection.connect("fileName=temp/Pipeline.db")
--?>
		<h1>Textures</h1>
		<table>
			<tr>
				<th>Name</th>
				<th>Width</th>
				<th>Height</th>
				<th>Mips</th>
				<th>Format</th>
				<th>Size (KiB)</th>
			</tr>
<?--
		if db:tableExists("Report_Texture") then

			local index = 0
			local totalDataSize = 0

			local rs = db:executeQuery("select * from Report_Texture order by dataSize desc")
			while rs:next() do
				if index % 2 == 1 then
					output:print("<tr class=\"alt\">")
				else
					output:print("<tr>")
				end

				output:print("<td>" .. rs:getStringByName("path") .. "</td>")
				output:print("<td>" .. rs:getInt32ByName("width") .. "</td>")
				output:print("<td>" .. rs:getInt32ByName("height") .. "</td>")
				output:print("<td>" .. rs:getInt32ByName("mipCount") .. "</td>")
				output:print("<td>" .. formats[rs:getInt32ByName("format")] .. "</td>")
				output:print("<td>" .. math.ceil(rs:getInt32ByName("dataSize") / 1024).. "</td>")

				output:printLn("</tr>")
				
				index = index + 1
				totalDataSize = totalDataSize + rs:getInt32ByName("dataSize")
			end

			output:print("<tr class=\"total\">")
			output:print("<td>Total, " .. index .. " texture(s)</td>")
			output:print("<td/>")
			output:print("<td/>")
			output:print("<td/>")
			output:print("<td/>")
			output:print("<td>" .. math.ceil(totalDataSize / 1024) .. " KiB</td>")
			output:print("</tr>")

		end
--?>
		</table>
		<br/>
		<br/>
	</body>
</html>
